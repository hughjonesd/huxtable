<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>TODO • huxtable</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet"><meta property="og:title" content="TODO"><link rel="stylesheet" href="extra.css"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">huxtable</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">5.7.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="index.html"><span class="fa fa-home"></span> Home</a></li>
<li class="nav-item"><a class="nav-link" href="articles/huxtable.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/huxtable.html">Introduction to Huxtable</a></li>
    <li><a class="dropdown-item" href="articles/design-principles.html">Design Principles, Comparisons and Limitations</a></li>
    <li><a class="dropdown-item" href="articles/huxreg.html">Regression Tables with huxreg</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials"><li><a class="external-link dropdown-item" href="https://hughjonesd.github.io/reporting-data-with-huxtable-4.3.0.html">Reporting data with huxtable</a></li>
    <li><a class="external-link dropdown-item" href="https://hughjonesd.github.io/whats-new-in-huxtable-5.0.0.html">What's new in huxtable 5.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://hughjonesd.github.io/huxtable/themes.html">Huxtable themes</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/hughjonesd/huxtable/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>TODO</h1>
      <small class="dont-index">Source: <a href="https://github.com/hughjonesd/huxtable/blob/HEAD/TODO.md" class="external-link"><code>TODO.md</code></a></small>
    </div>


<div id="todo" class="section level1">

<p>(5.0) means API change, consider for version 5.0</p>
</div>
<div class="section level1">
<h1 id="priority-changes">Priority changes<a class="anchor" aria-label="anchor" href="#priority-changes"></a></h1>
<ul><li>
<p>border styles:</p>
<ul><li>TeX Bug: single horizontal borders “start” too late after double vertical border joins them</li>
<li>Bug: HTML borders aren’t precollapsed, should they be? (Check status.)</li>
</ul></li>
<li><p>Factor out shared code from <code>quick_*</code> functions into a helper to reduce duplication.</p></li>
<li>
<p>Fixing border properties.</p>
<ul><li>left_border, left_border_style et al. (but not left_padding et al.) should set one of two lists of 3 matrices.</li>
<li>these are stored as attributes lr_borders and tb_borders</li>
<li>left_ and right_ borders are nrow x (ncol+1)</li>
<li>top and bottom borders are (nrow +1) x ncol</li>
<li>the 3 matrices reference border thickness, style and colour</li>
<li>left_border&lt;- et al. should accept a “bdr” object (a list with all 3) and set them appropriately.</li>
<li>all other objects run as they always did (for now!)</li>
<li>copying and merging attributes</li>
</ul></li>
</ul></div>
<div class="section level1">
<h1 id="post-50-changes">Post 5.0 changes<a class="anchor" aria-label="anchor" href="#post-50-changes"></a></h1>
<ul><li>Subsetting huxtables should respect rowspan. For example:</li>
</ul><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">j2</span> <span class="op">&lt;-</span> <span class="va">jams</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/merge_cells.html">merge_cells</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="reference/set-multiple.html">set_all_borders</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">j2</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span></code></pre></div>
<p>which gives “Price” as the heading, which you thought had been hidden!</p>
<ul><li>Use commonmark to allow markdown in cells and captions. It has no dependencies and is 131 Kb.
<ul><li>Have something like <code>output.class.format()</code> using S3 double dispatch? Or, maybe simpler, just <code>output(x, format)</code>… where <code>output</code> is an S3 generic.</li>
</ul></li>
<li>Fixing borders.
<ul><li>The inputs are the <code>left_border()&lt;-</code> function and friends.</li>
<li>The functions could be redesigned to write to two arrays of borders.</li>
<li>Also attributes that are stored in cells and rewritten on copy/subset!</li>
<li>The attribute copying/subsetting would have to work differently.
<ul><li>This happens in <code>[.huxtable</code>, <code>[&lt;-.huxtable</code>, and <code>delete_props</code> and <code>merge_props</code>, called by the other methods; and in <code>set_attr_dimnames</code>.</li>
</ul></li>
<li>span changes would no longer affect borders, since they wouldn’t disturb the array of cells.</li>
<li>
<code>top_border(ht)[x + 1,]</code> and <code>bottom_border(ht)[x,]</code> would overwrite each other; similarly left and right borders.</li>
</ul></li>
<li>Proper tidyselect for <code>set_xxx</code> - i.e. <code>set_bold(jams, everywhere, Price)</code> should work?
<ul><li>reimplement <code><a href="reference/final.html">final()</a></code>, <code>stripe</code> and <code>everywhere</code> like <code>last_col()</code>?</li>
<li>work is in the tidyselect-rc-spec branch. One problem is that <code>eval_select</code> doesn’t work with logicals. Another, maybe deeper one is the conflict between <code>set_bold(1:3, c(gear, mpg))</code> and <code>set_bold(1:3, some_vector)</code> where this could be logical or numeric or character.</li>
</ul></li>
<li>You can “trim” hhline borders by adding e.g. <code>&gt;{\huxb{255,255,255}{2}}|</code> after each vertical border line - or =. It has to be the same width as the vertical border, because it isn’t centred otherwise. So you could have it as a general property (roughly speaking, do vertical borders have “priority”); then maybe a convenience function <code>trim_borders</code> which would set the relevant border width and set vertical border priority.
<ul><li>There’s a similarly hackish approach in CSS using :after to create an imaginary border.</li>
<li>Does one need the same thing for vertical borders? (Actuallly this is pretty much how it currently works in LaTeX.)</li>
<li>In HTML (on FF), at the 4 “outer” corners different colours split diagonally; at all other corners, horizontal borders have priority except on the top row. i.e. it’s an unreliable mess!</li>
</ul></li>
<li>transparent colours in HTML, RTF, docx?</li>
</ul></div>
<div class="section level1">
<h1 id="future-thoughts">Future thoughts<a class="anchor" aria-label="anchor" href="#future-thoughts"></a></h1>
<ul><li>
<p>In general, when properties are unset, pick them dynamically for “good defaults”, rather than setting a predictable default.</p>
<ul><li>This is a better more general solution than <code>autoformat</code>, which could maybe be retired….</li>
</ul></li>
<li>
<p>Get rid of max_width in to_screen, to_md. It’s a huge hassle for the code, and who uses it?</p>
<ul><li>though the problem is having to keep to <code>options(screen)</code>, not the fact that it is an argument.</li>
</ul></li>
<li>
<p>Drop shadows? :-)</p>
<ul><li>looks like a Tikz job in TeX…</li>
</ul></li>
<li><p>Separate out table format representation and output from table creation.</p></li>
<li>
<p>Create a “textable” package which handles representation</p>
<ul><li>just basic as_textable methods for data frames etc.</li>
<li>representation probably as a list with rows, columns, cells, each with subcomponents - so content is just another subcomponent</li>
<li>maybe R6</li>
</ul></li>
<li>
<p>Output formats:</p>
<ul><li>allow different engines for different output formats (and engines could have options, e.g. use_cline vs use_hhline)</li>
<li>e.g. tikz (see “matrix” package in tikz manual)</li>
<li>maybe separate output formats into different packages?</li>
</ul></li>
<li>
<p>Fix problem of different classes in padding, col_widths etc. (5.0)</p>
<ul><li>Bring back is_a_number</li>
<li>Make everything a list-matrix</li>
<li>Or introduce explicit units with a character representation</li>
<li>Including e.g. <code>pct()</code> so you can still do <code>pct(.5, .25, .25)</code>
</li>
<li>Units can have a LaTeX and HTML representation</li>
<li>Of course that depends on the context, so maybe the function is like format(unit, context) where context might be ‘HTML-width’ or something</li>
<li>could still use characters (“5pt”, “10%”) in API, they would be internally converted</li>
<li>presumably the <code>units</code> (and <code>errors</code>?) package would be relevant</li>
<li>the easiest thing is probably to have widths as always character if you have multiple units. And autoconvert numbers to percentages when they are input.</li>
</ul></li>
<li>
<p>Border API rework (5.0)</p>
<ul><li>different set of commands</li>
<li>stored internally in vert/horiz arrays</li>
<li>always precollapsed by definition</li>
<li>maybe having a single class for borders</li>
<li>so you could do e.g. `set_borders(ht, 1:2, 1:2, border(“all”, 1, “red”, “solid”))</li>
<li>first arg could be lrtb, all, outer, vert, horiz, inner</li>
<li>similarly for padding: `set_padding(ht, 1:2, 1:2, pad(“all”, 2))</li>
</ul></li>
<li>
<p>Text class also? (5.0)</p>
<ul><li>and <code>set_text(ht, text(10, 'black', 'italic', 'cmss'))</code>
</li>
<li>one could also have e.g. escaped(“<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>”) which would autoset escape_contents</li>
</ul></li>
<li><p>Could hux$foo &lt;- 1:5 (when foo is a new column) copy properties like cbind? (5.0)</p></li>
<li>
<p>Changes to a shadowed cell should be redirected to the shadowing cell (5.0), or generally affect the merged cell (e.g. borders will work for the relevant area, assuming they are not between two merged cells)</p>
<ul><li>This fits with the “merge_cells” idea</li>
<li>But be aware you could have accidents e.g. if a border is set below a row, and one merged cell then picks it up (as now!)</li>
</ul></li>
<li><p>After e.g. June, set huxtable.add_colnames to TRUE by default (5.0).</p></li>
<li>
<p>headers property? (5.0)</p>
<ul><li>header rows and columns could be addressed using 3 argument <code>set_</code> syntax; e.g. a headers() function returning a matrix</li>
<li>headers would be copied (by default?) when you subset huxtables</li>
<li>arbitrary rows or columns can be headers; presumably the “relevant” header is the next one to the left/top (except for RTL languages?)</li>
<li>headers would be repeated after page breaks, and in HTML would use
<th>
style for column headers
<li>maybe headers might have a numeric level rather than simple TRUE or FALSE. Then you could have different styles for different levels.</li>

<li>
<p>use tidyselect::vars_select for columns in set_ interface (5.0)</p>
<ul><li>Advantage: more consistent with dplyr, allows e.g. set_bold(ht, 1, a:b, TRUE)</li>
<li>Downside: can’t use logical vectors for columns (without some strong trickery); misleading because you can’t do e.g. set_bold(ht, 1, a, b, c, TRUE)</li>
<li>One possibility would be to allow the above. If so we’d have to take nargs (as now) and change the nargs == 4 to nargs &gt;= 4. The downside of that is there’s no clear division between rows and columns.</li>
<li>See the new-colspec-ideas.md file for more thoughts</li>
</ul></li>


<div class="section level1">
<h1 id="bugs">Bugs<a class="anchor" aria-label="anchor" href="#bugs"></a></h1>
<ul><li>nowrap cells
<ul><li>if we use raw content in p/m/b, content wraps, then padding fails (only left pads top line, right pads bottom)</li>
<li>if we use mbox in p/m/b content doesn’t wrap, but cells don’t expand</li>
<li>if we use l/c/r, then table position goes wonky when cells expand; worse, background colors can be messed up in previous cells which expected the table not to expand!</li>
<li>need to respect valign (which p/m/b does for wrapped cells). But what is valign for a nowrap cell?</li>
<li>cells should expand to match nowrap width by default</li>
<li>basic choice is: nowrap cells overrun if content too long; or they expand, but can mess up background colour and position.
<ul><li>the first issue will happen more often, but the fix is more obvious to the user (wider table!)</li>
</ul></li>
</ul></li>
</ul></div>
<div class="section level1">
<h1 id="possibles">Possibles<a class="anchor" aria-label="anchor" href="#possibles"></a></h1>
<ul><li>
<p>Should table-wide or row/col-wide settings automatically apply to new cells?</p>
<ul><li>e.g. <code>ht %&gt;% set_bold(TRUE) %&gt;% insert_row("Blah", "blah")</code>, should the new row have bold TRUE?</li>
<li>this is a different way of thinking from copying stuff to new rows, and it might be more natural</li>
<li>implementation means that you store table/row/col/cell-level properties separately, and then overlay them when you pull them out.</li>
<li>having this AND copying could get messy fast.</li>
<li>having it instead of copying would mean that only properties set with e.g. <code>everywhere</code> on a row would be copied to a new column. But what about new rows when the header row is different? And with the <code>&lt;-</code> syntax, you can’t tell what the subset applied is, right?</li>
</ul></li>
<li>
<p>opendocument text/spreadsheet for libreoffice?</p>
<ul><li>At some point. Guess not a lot of demand.</li>
</ul></li>
<li>
<p>as_datatable for DT::renderDT()?</p>
<ul><li>Useful if you want to add the slick features of DT to your work</li>
<li>has format* functions for number_format</li>
<li>formatStyle can deal with bold, text_color, background_color, font_size et al.</li>
<li>also styleInterval and styleEqual are fun to look at</li>
<li>is there a use case for going via huxtable and not directly to renderDT?
<ul><li>familiarity? Easy to change over?</li>
</ul></li>
</ul></li>
<li>
<p>Look at perl’s Latex::Table and how they do it</p>
<ul><li>autouses ‘p{5cm}’ column for cols with &gt; 30 chars in a cell</li>
</ul></li>
<li>
<p>Use more purrr and rlang features, as we depend on these packages anyway</p>
<ul><li>Use <code>cli</code> for <code>to_screen</code>? Could maybe get ideas on code. It also has double borders.</li>
</ul></li>
<li>
<p><code>col_to_headers</code> which would take a column, sort by unique values, and replace the column with a rowspan-merged header?</p>
<ul><li>might relate to a <code>headers</code> flag, if we allow header rows to be in the middle of data</li>
<li>perhaps have a method for data frames (which outputs a huxtable)</li>
<li>maybe allow multiple columns</li>
</ul></li>
<li><p>Rotate whole table using “rotating” package (for PDF) and what for HTML (simple CSS rotation on table element, probably)?</p></li>
<li><p>Better centring of LaTeX tables and handling of width. Maybe push </p></li>
<li>
<p>Replace latex_float by float and use the CSS float property on the table (deals with text flow)?</p>
<ul><li>As with label, this means different things; also has different values, so if you set float() your code wouldn’t work in both HTML and TeX…</li>
<li>Tricky. Of course many things don’t work identically between HTML and TeX.</li>
<li>The wrapfig package defines which lets text wrap around. It doesn’t play nicely with floats anyway, so one option is to have a single float() for all the TeX possibilities.</li>
<li>Alternatively you have e.g. <code>wraparound()</code>, and keep <code><a href="reference/latex_float.html">latex_float()</a></code> separate.</li>
<li>You can combine options between HTML float (left/right) and wrapfig float.</li>
</ul></li>
<li><p>rescale numeric row_height and col_width when subsetting, as now under rbind/cbind?</p></li>
<li>
<p>Rename clean_contents and export it?</p>
<ul><li>Conceivably, people might want to override some individual cell contents with raw HTML/TeX/plain text. This still wouldn’t affect properties.</li>
</ul></li>
<li>
<p>use double-line feature to handle multiple border widths? i.e. top line is background, bottom line is border?</p>
<ul><li>not sure we can change colours halfway through though</li>
</ul></li>
<li>
<p>facilities for re-writing a table in an existing document.</p>
<ul><li>you’d need a way to identify the table (perhaps an automatic <code>id</code> table-level property, automatically set to a random number)</li>
<li>you might also want to overwrite the contents without affecting the style. (Or certain aspects of the style? E.g. bold for significance stars, may be data dependent.)</li>
<li>this may be a separate package.</li>
</ul></li>
<li>
<p>collapsed_border_xxx should return left, right, top, bottom rather than vert, horiz?</p>
<ul><li>You do the collapsing, but might want to provide lrtb borders</li>
</ul></li>
<li><p>special-case single horizontal lines across whole table?</p></li>
<li><p>make or similar work</p></li>
<li>
<p>way to address a particular subset of a matrix, e.g.</p>
<ul><li>ht %&gt;% area(1:3, 4:6) %&gt;% set_italic(TRUE) %&gt;% set_border_color(‘red’)</li>
<li>presumably this returns the ht with some attribute appropriately set, analogous to groups in a tibble</li>
<li>also this should be a separate package!</li>
</ul></li>
</ul></div>
<div class="section level1">
<h1 id="put-off-or-abandoned">Put off or abandoned<a class="anchor" aria-label="anchor" href="#put-off-or-abandoned"></a></h1>
<ul><li>
<p>cell spacing?</p>
<ul><li>this allows natural gaps between borders; see e.g. economist forecaster tables.</li>
<li>an alternative is to have small empty cells, but that’s a hack</li>
<li>just too hard in TeX</li>
</ul></li>
<li>
<p>table of descriptive statistics using <code>skimr</code>:</p>
<ul><li>think if this is even a good idea and people shouldn’t just DIY with <code>skim_to_wide</code>? Yeah, maybe not</li>
</ul></li>
<li>
<p>Methods for R packages?</p>
<ul><li>janitor::tabyl is just a data frame, no useful information available</li>
<li>tibble::glimpse prints stuff and returns the original</li>
</ul></li>
<li><p>Use arydshln in LaTeX? Seems incompatible with hhline</p></li>
<li><p>latex row height is of \textheight when numeric, not % table height. Hard to fix.</p></li>
<li>
<p>when inserting one hux into another, row heights/col widths may no longer make sense,</p>
<ul><li>because they are implicit proportions.</li>
</ul></li>
<li><p>Could S4 classes work to cbind data frames? Probably not, or hella complex and requires reworking internals: <a href="https://stackoverflow.com/questions/47967264/dispatch-of-rbind-and-cbind-for-a-data-frame" class="external-link uri">https://stackoverflow.com/questions/47967264/dispatch-of-rbind-and-cbind-for-a-data-frame</a></p></li>
<li>
<p>Implement <code><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">dplyr::bind_rows</a></code> and <code>bind_cols</code>?</p>
<ul><li>they aren’t methods.</li>
</ul></li>
</ul></div>
</th>
</li>
</ul></li>
</ul></div>


  </main></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Hugh-Jones.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

